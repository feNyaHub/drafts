<html>
  <link rel="stylesheet" href="style.css">
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="300px" height="300px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" id="menu" class="circular-menu">
    <circle class="center" cx="50" cy="50" r="15"/>
    <g class="option index-8">
      <path class="surface" d="M33.57715,42.65674c1.80566-4.03271,5.04688-7.27393,9.07959-9.07959L32.31641,8.6123
        C21.68457,13.16064,13.16113,21.68408,8.6123,32.31543L33.57715,42.65674z"/>
      <path class="border" d="M7.23779,31.74609C11.94434,20.76172,20.7627,11.94385,31.74707,7.2373l-1.14844-2.77246
        C18.88184,9.47607,9.47705,18.88086,4.46533,30.59766L7.23779,31.74609z"/>
    </g>
    <g class="option index-7">
      <path class="surface" d="M32,50c0-2.26416,0.43604-4.42188,1.19922-6.41748L8.2373,33.24268C6.15625,38.42334,5,44.0752,5,50
        s1.15625,11.57715,3.23682,16.75781l24.9624-10.33984C32.43604,54.42188,32,52.26465,32,50z"/>
      <path class="border" d="M3.5,50c0-6.12354,1.20117-11.96826,3.36182-17.32715L4.09033,31.5249C1.7832,37.23779,0.5,43.47021,0.5,50
        c0,6.5293,1.2832,12.7627,3.59033,18.47559l2.77148-1.14844C4.70117,61.96875,3.5,56.12305,3.5,50z"/>
    </g>
    <g class="option index-6">
      <path class="surface" d="M42.65625,66.42285c-4.03223-1.80566-7.27295-5.0459-9.0791-9.0791L8.6123,67.68457
        c4.54834,10.63184,13.07178,19.15527,23.70312,23.70312L42.65625,66.42285z"/>
      <path class="border" d="M31.74609,92.7627c-10.98438-4.70703-19.80176-13.52441-24.5083-24.50879l-2.77197,1.14844
        c5.01123,11.7168,14.41553,21.12109,26.13184,26.13184L31.74609,92.7627z"/>
    </g>
    <g class="option index-5">
      <path class="surface" d="M56.41797,66.80078C54.42188,67.56445,52.26367,68,50,68c-2.26416,0-4.42188-0.43555-6.41797-1.19922L33.24219,91.7627
        C38.42334,93.84375,44.0752,95,50,95s11.57617-1.15625,16.75684-3.23633L56.41797,66.80078z"/>
      <path class="border" d="M67.32617,93.13867C61.96777,95.29883,56.12305,96.5,50,96.5c-6.12354,0-11.96826-1.20117-17.32764-3.36133
        l-1.14746,2.77051C37.23779,98.2168,43.47021,99.5,50,99.5c6.5293,0,12.76172-1.2832,18.47461-3.58984L67.32617,93.13867z"/>
    </g>
    <g class="option index-4">
      <path class="surface" d="M66.42285,57.34473c-1.80664,4.03223-5.04688,7.27246-9.0791,9.07812L67.68359,91.3877
        c10.63184-4.54785,19.1543-13.07031,23.70312-23.70117L66.42285,57.34473z"/>
      <path class="border" d="M92.76172,68.25586C88.05469,79.23926,79.2373,88.05664,68.25293,92.7627l1.14844,2.77246
        c11.71582-5.01172,21.12012-14.41504,26.13281-26.13086L92.76172,68.25586z"/>
    </g>
    <g class="option index-3">
      <path class="surface" d="M68,50c0,2.26465-0.43652,4.42285-1.19922,6.41895L91.7627,66.75977C93.84375,61.57812,95,55.92578,95,50
        c0-5.9248-1.15625-11.57617-3.2373-16.75684L66.80078,43.58252C67.56445,45.57812,68,47.73584,68,50z"/>
      <path class="border" d="M96.5,50c0,6.12402-1.20117,11.96973-3.3623,17.3291l2.77148,1.14746C98.2168,62.76367,99.5,56.53027,99.5,50
        c0-6.5293-1.2832-12.76172-3.58984-18.47461l-2.77148,1.14795C95.29883,38.03223,96.5,43.87695,96.5,50z"/>
    </g>
    <g class="option index-2">
      <path class="surface" d="M57.34473,33.57715c4.03223,1.80664,7.27246,5.04736,9.07812,9.07959L91.3877,32.31592
        c-4.54883-10.63135-13.07129-19.1543-23.70215-23.70312L57.34473,33.57715z"/>
      <path class="border" d="M68.25488,7.23779c10.9834,4.70703,19.80176,13.5249,24.50781,24.50879l2.77246-1.14795
        C90.52344,18.88184,81.11914,9.47754,69.40332,4.46582L68.25488,7.23779z"/>
    </g>
    <g class="option index-1">
      <path class="surface" d="M43.58252,33.19922C45.57812,32.43604,47.73584,32,50,32c2.26465,0,4.42188,0.43604,6.41797,1.19922L66.75781,8.2373
        C61.57715,6.15625,55.9248,5,50,5S38.42383,6.15625,33.24316,8.23682L43.58252,33.19922z"/>
      <path class="border" d="M32.67383,6.86133C38.03223,4.70117,43.87695,3.5,50,3.5c6.12402,0,11.96875,1.20117,17.32812,3.36182l1.14746-2.771
        C62.7627,1.7832,56.53027,0.5,50,0.5c-6.5293,0-12.76172,1.28271-18.47412,3.58984L32.67383,6.86133z"/>
    </g>
  </svg>

  <script charset="utf-8" src="//liwe.co/api/liwe.js"></script>
  <script src="menu.js"></script>
  <script>
    var myRemote,
      myMenu = new CircularMenu('menu'),
      myLiwe = new Liwe({
        key: 'k3Y4l1W3g1ThU85aMp1E4pP5',
        maxRemoteConn: 1
      });

    myLiwe.on('connect', function (info) {
      console.log('%cCONNECTED', 'background:green; color:white; font-weight:bold;', info);
    });

    myLiwe.on('error', function (error) {
      console.log('%cAlpha [error]', 'background:red; color:white; font-weight:bold;', error);
    });

    myLiwe.on('new_remote', function (remote) {
      myRemote = remote;
      remote.setUI('touch');

      remote.on('touch_move_start', function (data) {
        // Activate the menu
        myMenu.activate();
      });
      remote.on('touch_move_update', function (data) {
        // Find the new position
        myMenu.setPosition(findPosition(data.data.move.x, data.data.move.y));
      });
      remote.on('touch_move_end', function (data) {
        // Activate the menu
        myMenu.close();
      });

      remote.on('disconnect', function (remote) {
        console.info('The remote .' + remote.id + ' has been disconnected.');
      });
    });

    myLiwe.connect();


    function findPosition (x, y) {
      if (Math.abs(x) + Math.abs(y) < 20) {
        return 0;
      }
      else if (x > y) {
        if (-y > x) {
          return edge(-y, x, 1); // 1st quarter
        }
        else {
          return edge(x, y, 3); // 2nd quarter
        }
      }
      else {
        if (-x < y) {
          return edge(y, -x, 5); // 3rd quarter
        }
        else {
          return edge(-x, -y, 7); // 4th quarter
        }
      }
    }

    function edge (x, y, middlePos) {
      y += x/2; 
      if (y < 0) {
        middlePos -= 1; 
      }
      else if (y > x) {
        middlePos += 1;
      }
      return middlePos || middlePos + 8;
    }
  </script>
</html>
